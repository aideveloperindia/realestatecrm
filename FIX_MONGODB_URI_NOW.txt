===========================================
URGENT FIX FOR MONGODB CONNECTION ERROR
===========================================

CURRENT (WRONG) CONNECTION STRING IN VERCEL:
---------------------------------------------
mongodb+srv://aideveloperindia_db_user:y3VndJC8SvQovBKY@realestatecrm.fiq02a1.mongodb.net/?appName=realestatecrm

PROBLEMS:
- Missing database name (/karimnagar_crm)
- Missing required query parameters (retryWrites=true&w=majority)

===========================================
CORRECT CONNECTION STRING (COPY THIS):
===========================================

mongodb+srv://aideveloperindia_db_user:y3VndJC8SvQovBKY@realestatecrm.fiq02a1.mongodb.net/karimnagar_crm?retryWrites=true&w=majority&appName=realestatecrm

===========================================
STEPS TO FIX:
===========================================

1. Open Vercel Dashboard
   https://vercel.com/dashboard

2. Select your project: realestatecrms

3. Go to: Settings → Environment Variables

4. Find variable: MONGODB_URI

5. Click "Edit" or delete and re-add

6. Paste this EXACT value (no spaces, no quotes):
   mongodb+srv://aideveloperindia_db_user:y3VndJC8SvQovBKY@realestatecrm.fiq02a1.mongodb.net/karimnagar_crm?retryWrites=true&w=majority&appName=realestatecrm

7. Make sure it's set for:
   ☑ Production
   ☑ Preview
   ☑ Development

8. Click "Save"

9. Go to: Deployments tab

10. Click "..." on latest deployment

11. Click "Redeploy"

12. Wait for deployment to complete

13. Test: Visit https://realestatecrms.vercel.app/login

===========================================
WHAT CHANGED:
===========================================

BEFORE: ...mongodb.net/?appName=realestatecrm
                              ↑
                        Missing database name
                        Missing required params

AFTER:  ...mongodb.net/karimnagar_crm?retryWrites=true&w=majority&appName=realestatecrm
                              ↑                              ↑
                        Database name added          Required params added

===========================================
ALSO CHECK:
===========================================

1. MongoDB Atlas IP Whitelist:
   - Go to MongoDB Atlas → Network Access
   - Add IP: 0.0.0.0/0 (Allow Access from Anywhere)
   - Wait 1-2 minutes

2. Other Environment Variables in Vercel:
   - JWT_SECRET: 6fa9e19fcca83be9b4eec7277bd48d171d07934c879bf67a3ba8fb2089a26ca3
   - NEXT_PUBLIC_APP_URL: https://realestatecrms.vercel.app

3. After redeploy, seed database:
   - Visit: https://realestatecrms.vercel.app/api/seed
   - Or use: POST with header Authorization: Bearer change-this-secret

===========================================

